<!doctype html><html><head><title>Using Weechat With Glowing Bear for IRC | Rahul Jha (~RJ722) Blog</title><link rel=stylesheet href=/red/css/blog.css><link rel=stylesheet href=/red/css/syntax.css><link rel=apple-touch-icon sizes=180x180 href=/red/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/red/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/red/icons/favicon-16x16.png><meta charset=utf-8><meta content="utf-8" http-equiv=encoding></head><body><div class=page><ul class=menu><li><a class=menu__item href=/red/>about</a></li><li><a class="menu__item menu__item__inside" href=/red/blog/>blog</a></li><li><a class=menu__item href=/red/etc>etc</a></li></ul><div id=content><div class=post><h1>Using Weechat with Glowing Bear for IRC</h1><div class=break-line></div><div class=timestamp>JANUARY 2, 2019</div><p>Last month, I had a new addition to my toolbox - <a href=https://www.glowing-bear.org/#!/>Glowing
Bear</a>, which has been a really nice improvement, allowing me to access
Weechat (hosted on a server) through my browser. Here&rsquo;s how I set it up.</p><p>But, before we begin - the curious folks might ask, &ldquo;What had you been using
all this time?&rdquo;</p><p>Previously, I could directly ssh<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> into my server, and attach to a
<a href=https://www.gnu.org/software/screen/><code>screen</code></a> session which ran weechat, using the command:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>mosh USERNAME@SERVER_IP -- screen -D -RR weechat
</code></pre></div><p>This is pretty neat, why would you want to change it?</p><p>&ldquo;Latency&rdquo; - It was not pleasant, so much so, that I started running two
instances of weechat - one locally for chatting, and the one on the server for
listening to messages when AFK. It was getting pretty unmanageable, so I decided
to look for alternatives. Luckily, one of my friends, <a href=https://blog.lazkani.io/about_me/>Armageddon</a>,
pointed me towards <a href=https://www.glowing-bear.org/#!/>Glowing Bear</a> - which provides a nice web frontend to
weechat.</p><h2 id=setting-up-glowing-bear>Setting Up Glowing Bear</h2><p>Glowing Bear has pretty decent documentation available at
<a href=https://www.glowing-bear.org/#!/>https://www.glowing-bear.org/#!/</a>.</p><p>The basic architecture is somewhat similar to the <a href=https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern>pub-sub architecure</a> - weechat &lsquo;relays&rsquo; (publishes) all messages at a particular port on
a machine where glowing bear can then &lsquo;listen&rsquo; for the messages (subscribe).</p><p>Can other people listen to my messages?</p><p>If you&rsquo;re running glowing bear with a local instance of weechat, you shouldn&rsquo;t
worry too much. However, if connecting to a remote instance, you must encrypt
all communications between your browser and WeeChat.</p><p>Since <a href=https://www.glowing-bear.org/#!/>Glowing Bear</a> uses TLS for encryption, it means that we need to put
up a signed certificate. They recommend using <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a> for
getting a certificate, which is really easy. Just install <a href=https://certbot.eff.org/>certbot</a> and
run:</p><pre><code>certbot certonly --standalone -d DOMAIN_NAME
</code></pre><p>Once the certificates are generated, the only thing was to make them
visible to weechat:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir -p ~username/.weechat/ssl
$ cat /etc/letsencrypt/live/DOMAIN_NAME/<span class=o>{</span>fullchain,privkey<span class=o>}</span>.pem &gt; ~username/.weechat/ssl/relay.pem
$ chown -R username:username ~username/.weechat/ssl/
</code></pre></div><p>Now, the only issue with me was that I did not have superuser access to the box
I was running weechat into, and therefore could not access cert files. But,
After talking to my wonderful host at <a href=https://wwww.insomnia247.nl>insomnia247.nl</a>:
<a href=https://git.insomnia247.nl/coolfire>coolFire</a>, I came to know that certificates I&rsquo;m using for my Apache VHost
should be enough to encrypt my communication (through port 443) and I need not
start an encrypted relay from weechat. coolFire was also gracious enough to
throw in some voodoo {% sidenote &lsquo;voodoo-id&rsquo; &ldquo;of course, by which I mean that I didn&rsquo;t
understand it&rdquo; %} and give me a custom URL for running my weechat instance.</p><p>Now, let&rsquo;s start a WeeChat relay:</p><pre><code>/set relay.network.password y0ur_StRonG-pa$sw0rd:of*choice
/relay add weechat 9001 # Note that this is NOT encrypted.
</code></pre><p>For connecting to Glowing Bear, I use port 443 - which allows me to encrypt my
connection. Note that this isn&rsquo;t entirely safe, because the fellow users on my
host can still monitor port 9001, which is unecrypted and only protected by a
password. But, I can manage this level of risk! :-)</p><h2 id=icing-over-cake>Icing over cake</h2><p>I run glowing bear on qutebrowser, through which I can access the whole interface
without ever having to leave the comfort of my keyboard. \o/</p><h2 id=further-todos>Further TODO&rsquo;s</h2><p>Glowing Bear&rsquo;s notification system is a little weird - it just stops notifying
me out of the blue. Remember my friend, <a href=https://blog.lazkani.io/about_me/>Armagaeddon</a> - he actually
has a weechat plugin for channeling remote notifications to local systems, but
it turned out that the script will take some additional work to work with macOS.</p><p>Another thing that I want to do is employ a chat logger - I&rsquo;ve had some pretty
interesting conversation with people, and they just wash away as soon as I
restart weechat. This should be pretty easy to do, but I&rsquo;ve had too much on my
plate to care right now.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Using mosh - &lsquo;mobile shell&rsquo;, which supports intermittent connectivity,
which is to say that it allows me to retain the session if the network breaks in
between.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section><div class=post-ender><div class=tag-list>TAGGED AS:<div class=tag><a href=/red/tags/programming>PROGRAMMING</a></div><div class=tag><a href=/red/tags/tools>TOOLS</a></div></div><div class=share><a href="https://twitter.com/intent/tweet?text=Using%20Weechat%20with%20Glowing%20Bear%20for%20IRC&url=https%3a%2f%2frj722.github.io%2fred%2fblog%2fusing-weechat-with-glowing-bear%2f&via=antisemantic"><div class=share__image><img src=/red/images/share-on-twitter.svg></div><div class=share__text>Share on Twitter</div></a></div></div><div class=about><div class=t2>JOIN ME</div>Hi, I'm Rahul. I write about programming, design and self-learning. If you like what I'm doing, consider subscribing to my newsletter:<form action=https://rj722.github.io class=subscribe><input type=email class=subscribe__email placeholder="Your best email">
<input type=submit class=subscribe__button title=Subscribe value=Subscribe></form></div></div></div><footer><div class=footer__copyright>Copyright Â© 2020 Rahul Jha</div><div class=footer__info>Made with <a href=https://gohugo.io/>Hugo</a> &mdash; Theme <a href=https://github.com/rj722/xampa>Red Zempa</a> by <a href=https://rj722.github.io/>Rahul Jha</a></div></footer></div></body></html>